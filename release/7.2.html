<html>
 <head>
  <title>7.2 Release Timetable</title>
  <style>
.release {
  border: solid 1px black;
  margin-bottom: 0.5em;
  margin-right: 0.5em;
  display: inline-block;
}
.alpha { background-color: #F88; }
.fork  { background-color: #F00; }
.beta  { background-color: #F80; }
.rc    { background-color: #FF0; }
.final { background-color: #0F0; }
.label { font-weight: bold; }
  </style>
 </head>
 <body>
  <div id="releases"><span class="label">Releases:</span><br/></div>

  <script>
function row(name, value, cls = null) {
  if (name !== null) {
    var lbl = document.createElement("span");
    lbl.className = "label";
    lbl.appendChild(document.createTextNode(name + ": "));
  }
  var val = document.createElement("span");
  val.className = "value";
  val.appendChild(document.createTextNode(value));

  var div = document.createElement("div");
  if (cls !== null) div.className = cls;
  if (name !== null) div.appendChild(lbl);
  div.appendChild(val);

  return div;
}

function appendRelease(version, dt) {
  var release = document.createElement("div");

  var cls = "final";
  if (/\d-(alpha|beta|rc|final)/g.exec(version) !== null) {
    cls = (/\d-(alpha|beta|rc|final)/g.exec(version))[1];
  }

  release.className = "release " + cls;
  release.appendChild(row("Version", version));
  release.appendChild(row("Date", dt.toString()));

  var countdown = row("Countdown", "");
  release.appendChild(countdown);
  var interval = setInterval(function() {
    var txt = countdown.lastChild;
    txt.innerHTML = "";
    var diff = (dt.getTime() - Date.now()) / 1000;
    if (diff < 0) {
      txt.innerHTML = "&#x1F389;";
      clearInterval(interval);
      return;
    }
    if (diff >= 86400) {
      txt.innerHTML += Math.floor(diff / 86400) + "d ";
      diff = diff % 86400;
    }
    if (diff >= 3600) {
      txt.innerHTML += Math.floor(diff / 3600) + "h ";
      diff = diff % 3600;
    }
    if (diff >= 60) {
      txt.innerHTML += Math.floor(diff / 60) + "m ";
      diff = diff % 60;
    }
    if (diff > 0) {
      txt.innerHTML += Math.floor(diff) + "s";
    }
  }, 1000);

  document.getElementById("releases").appendChild(release);
}

appendRelease("7.2.0-alpha1", new Date("2017-06-08 12:00 -0400"));
appendRelease("7.2.0-alpha2", new Date("2017-06-22 12:00 -0400"));
appendRelease("7.2.0-alpha3", new Date("2017-07-06 12:00 -0400"));
appendRelease("7.2.0-beta1", new Date("2017-07-20 12:00 -0400"));
appendRelease("7.2.0-beta2", new Date("2017-08-03 12:00 -0400"));
appendRelease("7.2.0-beta3", new Date("2017-08-17 12:00 -0400"));
appendRelease("7.2.0-rc1", new Date("2017-08-31 12:00 -0400"));
appendRelease("7.2.0-rc2", new Date("2017-09-14 12:00 -0400"));
appendRelease("7.2.0-rc3", new Date("2017-09-28 12:00 -0400"));
appendRelease("7.2.0-rc4", new Date("2017-10-12 12:00 -0400"));
appendRelease("7.2.0-rc5", new Date("2017-10-26 12:00 -0400"));
appendRelease("7.2.0-rc6", new Date("2017-11-09 12:00 -0500"));
appendRelease("7.2.0-final", new Date("2017-11-30 12:00 -0500"));
  </script>
 </body>
</html>
